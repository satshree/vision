<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Vision </title>
    <link rel="stylesheet" href="./style.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <!-- <link type="text/css" rel="stylesheet" href="materialize/css/materialize.css"  media="screen,projection"/> -->
    <link type="text/css" rel="stylesheet" href="./materialize/css/materialize.min.css"  media="screen,projection"/>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <script>window.$ = window.jQuery = require('./js/jquery.js');</script>
    <style>
      .info-box {
        padding:0 150px;
      }
    </style>
  </head>

  <body>
      <div class="container">
        <div class="title center">
          <h1>Vision</h1>
          <strong> Seek and You Shall Receive </strong>
        </div>
        <hr>
        <div class="contents center">
          <a href="./default.html"> <button class="waves-effect waves-light btn home-btn tooltipped" data-tooltip="Vision will scan everything for you."> Let Vision Do The Dirty Work. </button> </a>
          <a href="./custom.html"> <button class="waves-effect waves-light btn home-btn tooltipped" data-tooltip="Tell Vision how to scan the network."> Scan The Network Yourself. </button> </a>
          <!-- <a href="./live.html"> <button class="waves-effect waves-light btn home-btn tooltipped" data-tooltip="Monitor live HTTP/HTTPS Requests."> Monitor Your Internet Traffic. </button> </a> -->
        </div>
        <div style="padding:0 100px;" class="center">
          <strong> Your IP Address: </strong><i id="ip"> ... </i> <br>
          <strong> Your Gateway Address: </strong><i id="gateway"> ... </i>
        </div>
        <br> <br>
        <div class="container info-box">
          <hr>
          <p align="center">
            Vision scans your network for online devices.
            <br>
            <small>
              Vision was started back in June of 2019 â€“ developed by Satshree Shrestha.
            </small>
          </p>
        </div>
      </div>

    <!--JavaScript at end of body for optimized loading-->
    <!-- <script type="text/javascript" src="materialize/js/materialize.js"></script> -->
    <script type="text/javascript" src="./materialize/js/materialize.min.js"></script>
  </body>
  <script>
    const swal = require('sweetalert')
    const remote = require('electron').remote
    if (process.platform !== "win32") {
      const isRoot = require('is-root')
      if (!isRoot()) {
        swal({
          text:"Please run 'Vision' as administrator.",
          icon:"warning"
        }).then(() => {
          const w = remote.getCurrentWindow()
          w.close()
        })
      }
    }
    const {PythonShell} = require('python-shell')
    const path = require("path")

    let options = {
      scriptPath : path.join(__dirname, './engine/')
    }

    let pyshell = new PythonShell('boot.py', options)

    pyshell.on('message', function(message) {
      message = JSON.parse(message)
      document.getElementById("ip").innerHTML = message.ip
      document.getElementById("gateway").innerHTML = message.gateway
      pyshell.terminate()
    })
      
  </script>
  <script>
    $(document).ready(function(){
      $('.tooltipped').tooltip();
    });
  </script>
</html>