<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Vision </title>
    <link rel="stylesheet" href="./style.css">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <!-- <link type="text/css" rel="stylesheet" href="materialize/css/materialize.css"  media="screen,projection"/> -->
    <link type="text/css" rel="stylesheet" href="./materialize/css/materialize.min.css"  media="screen,projection"/>
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>

  <body>
      <div class="container">
        <div class="title center">
          <h1>Vision</h1>
          <strong> Seek and You Shall Receive </strong>
        </div>
        <hr>
        <div class="contents center">
          <a href="./default.html"> <button class="waves-effect waves-light btn home-btn"> Let Vision Do The Dirty Work. </button> </a>
          <a href="./custom.html"> <button class="waves-effect waves-light btn home-btn"> Scan The Network Yourself. </button> </a>
        </div>
        <div style="padding:0 100px;">
          <strong> Your IP Address: </strong><i id="ip"> ... </i> <br>
          <strong> Your Gateway Address: </strong><i id="gateway"> ... </i>
        </div>
      </div>

    <!--JavaScript at end of body for optimized loading-->
    <!-- <script type="text/javascript" src="materialize/js/materialize.js"></script> -->
    <script type="text/javascript" src="./materialize/js/materialize.min.js"></script>
  </body>
  <script>
    let {PythonShell} = require('python-shell')
    let path = require("path")

    let options = {
      scriptPath : path.join(__dirname, '../'),
      args: ['boot']
    }

    let pyshell = new PythonShell('main.py', options)

    pyshell.on('message', function(message) {
      message = JSON.parse(message)
      document.getElementById("ip").innerHTML = message.ip
      document.getElementById("gateway").innerHTML = message.gateway
    })
      
  </script>
</html>